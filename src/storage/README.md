# storage フォルダ概要

このフォルダには、メモデータの永続化処理（保存・読み込み・更新・削除）を担当するクラスを格納します。
内部的には SQLite を用いてデータベースにアクセスしており、アプリケーションのデータ管理を一手に引き受ける層です。

---

## 主なファイル

- `MemoRepository.java`
  `memo` パッケージの `Memo` オブジェクトと SQLite データベースとの橋渡しを行うクラスです。
  メモの保存（INSERT）、取得（SELECT）、更新（UPDATE）、削除（DELETE）などの処理を提供します。

- `DataAccessException.java`
  データベースアクセス時の例外をラップするカスタム例外クラスです。
  JDBC の `SQLException` をアプリケーション全体で扱いやすい形式に変換し、例外処理の共通化と可読性向上に寄与します。

---

## この層の責務（責任）

- SQLite データベースとの接続・操作（JDBC 利用）
- メモデータの永続化（保存・読み込み・更新・削除）
- SQL の実行と例外処理の共通化
- アプリのビジネスロジック層（`memo`）とデータ層の分離

---

## 補足（v0.2 現在）

- 永続化方式は JSON 形式から SQLite に完全移行済み
- DB ファイルは `src/storage/hashmemo.db` に保存され、CLI / GUI 共通で利用されます
- 将来的に複数データベース（MySQL など）への切り替えも見据え、JDBC による抽象化を意識した構成となっています
- DB 接続は `System.getProperty("user.dir")` を用いた相対指定により、Eclipse / VSCode 双方に対応しています

---

## 今後の拡張の可能性

- DAO 層のインターフェース化によるテスト容易性の向上
- 永続化のログ出力や接続監視機能の追加
- データスキーマのバージョン管理とマイグレーション対応
